/* ainojs-react-image v1.3.1 - April 19th 2015 - (c) Aino - MIT Licensed */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.ReactImage=t()}}(function(){return function t(e,o,n){function i(s,a){if(!o[s]){if(!e[s]){var d="function"==typeof require&&require;if(!a&&d)return d(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=o[s]={exports:{}};e[s][0].call(l.exports,function(t){var o=e[s][1][t];return i(o?o:t)},l,l.exports,t,e,o,n)}return o[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(){},{}],2:[function(t,e){var o=t("react"),n="undefined"==typeof window,i=function(t,e){t=t.map(function(t){return parseInt(t,10)}).sort(function(t,e){return t-e});var o;return t.some(function(t){return o=t,t>e}),o},r=n?1:Math.min(1.5,window.devicePixelRatio)||1;e.exports=o.createClass({getInitialState:function(){return{loading:!0,display:"",fallback:"",padding:0,shouldload:!1}},getDefaultProps:function(){return{alt:"",threshold:!n&&window.navigator.userAgent.match(/iPhone/i)?500:50,onLoad:function(){},onBeforeLoad:function(){}}},getImage:function(t){var e=this.props.src;if("string"==typeof e)return e;if("[object Object]"==Object.prototype.toString.call(e)){var o=Object.keys(e);return e[i(o,t*r)]}throw new TypeError('"src" must be a string or object')},componentWillMount:function(){var t=0;this.props.ratio&&(t=Math.round(1e4*this.props.ratio)/100),this.setState({fallback:this.getImage(500),padding:t})},componentDidMount:function(){if(this.props.lazy&&!n&&window.addEventListener("scroll",this.onScroll),this.props.lazy&&!this.props.ratio&&console.warn("Lazy loading images without a ratio is not recommended and might fail"),this.props.extra){var t=new Image;t.src=this.props.extra}this.setState({display:this.getImage(this.getDOMNode().parentNode.getBoundingClientRect().width),shouldload:!this.props.lazy},function(){this.onScroll(),this.load()})},load:function(){if(this.isMounted()&&this.state.shouldload){var t=new Image;t.onload=this.onImageLoad,t.src=this.state.display,this.props.onBeforeLoad(t)}},onScroll:function(){if(!n){if(this.state.shouldload||!this.isMounted())return void this.removeScrollListener();var t=this.getDOMNode().getBoundingClientRect();t.bottom>-this.props.threshold&&t.top<window.innerHeight+this.props.threshold&&this.setState({shouldload:!0},this.load)}},removeScrollListener:function(){n||window.removeEventListener("scroll",this.onScroll)},componentWillUnmount:function(){this.removeScrollListener()},onImageLoad:function(t){this.isMounted()&&this.setState({loading:!1,padding:this.state.padding||Math.round(t.target.height/t.target.width*1e4)/100},function(){this.props.onLoad(t.target)})},render:function(){var t=["image-container"],e={},n={paddingBottom:this.state.padding+"%",position:"relative"};this.state.loading?this.state.display&&t.push(this.state.shouldload?"loading":"waiting"):(e={backgroundImage:"url("+this.state.display+")"+(this.props.extra?", url("+this.props.extra+")":"")},t.push("ready")),this.props.lazy&&t.push("lazy"),this.state.padding&&t.push("padding");var i={__html:'<noscript><img src="'+this.state.fallback+'" alt="'+this.props.alt+'"></noscript>'},r=o.createElement("div",{className:"image",style:e,dangerouslySetInnerHTML:i});return o.createElement("div",{className:t.join(" "),style:n},r)}})},{}]},{},[2])(2)});