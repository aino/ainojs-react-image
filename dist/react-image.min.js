/* ainojs-react-image v1.0.11 - April 14th 2015 - (c) Aino - MIT Licensed */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.ReactImage=t()}}(function(){return function t(e,n,o){function i(s,a){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return i(n?n:t)},d,d.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(){},{}],2:[function(t,e){var n=t("react"),o=(t("ainojs-dimensions"),"undefined"==typeof window),i=function(t,e){t=t.map(function(t){return parseInt(t,10)}).sort(function(t,e){return t-e});for(var n=0,o=t[n];e>t[n]&&t[n++];)o=t[n];return o},r=o?1:window.devicePixelRatio||1;e.exports=n.createClass({getInitialState:function(){return{loading:!0,display:"",fallback:"",padding:0,shouldload:!1}},getDefaultProps:function(){return{alt:"",onLoad:function(){}}},getImage:function(t){var e=this.props.src;if("string"==typeof e)return e;if("[object Object]"==Object.prototype.toString.call(e)){var n=Object.keys(e);return e[i(n,t*r)]}throw new TypeError('"src" must be a string or object')},componentWillMount:function(){var t=0;this.props.ratio&&(t=Math.round(1e4*this.props.ratio)/100),this.setState({fallback:this.getImage(500),padding:t})},componentDidMount:function(){this.props.lazy&&!o&&window.addEventListener("scroll",this.onScroll);var t=this.getDOMNode().parentNode,e=t.getBoundingClientRect().width;this.setState({display:this.getImage(e),shouldload:!this.props.lazy},function(){this.onScroll(),this.load()})},load:function(){if(this.isMounted()&&this.state.shouldload){var t=new Image;t.onload=this.onImageLoad,t.src=this.state.display}},onScroll:function(){if(!o){if(this.state.shouldload||!this.isMounted())return void this.removeScrollListener();var t=this.getDOMNode().getBoundingClientRect(),e=t.top,n=e+t.height,i=document.body.scrollTop,r=window.innerHeight;n>i&&i+r>e&&this.setState({shouldload:!0},this.load)}},removeScrollListener:function(){o||window.removeEventListener("scroll",this.onScroll)},componentWillUnmount:function(){this.removeScrollListener()},onImageLoad:function(t){this.isMounted()&&this.setState({loading:!1,padding:this.state.padding||Math.round(t.target.height/t.target.width*1e4)/100},this.props.onLoad)},render:function(){var t=["image-container"],e={},o={paddingBottom:this.state.padding+"%",position:"relative"};this.state.loading?t.push(this.state.shouldload?"loading":"waiting"):e={backgroundImage:"url("+this.state.display+")",backgroundSize:"cover",backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat",position:"absolute",width:"100%",height:"100%",top:0,left:0},this.props.lazy&&t.push("lazy");var i="width:100%";this.state.padding&&(i+=";position:absolute;top:0;left:0");var r={__html:'<img src="'+this.state.fallback+'" style="'+i+'" alt="'+this.props.alt+'">'},s=n.createElement("noscript",{dangerouslySetInnerHTML:r}),a=n.createElement("div",{className:"image",style:e},s);return n.createElement("div",{className:t.join(" "),style:o},a)}})},{"ainojs-dimensions":3}],3:[function(t,e){var n="undefined"==typeof window,o=function(t){this.elem=t,this.rect="getBoundingClientRect"in t?t.getBoundingClientRect():!1,this.comp=!n&&"getComputedStyle"in window?window.getComputedStyle:!1};o.prototype.getValue=function(t){if(n)return 0;var e=t.toLowerCase(),o=this.rect?this.rect[e]:this.elem["offset"+t];return("undefined"==typeof o||isNaN(o))&&this.comp&&(o=this.comp(this.elem,null)[e].replace("px","")),parseInt(o,10)},e.exports=function(t){var e=new o(t);return{width:e.getValue("Width"),height:e.getValue("Height"),top:e.getValue("Top"),left:e.getValue("Left")}}},{}]},{},[2])(2)});